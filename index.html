<!DOCTYPE html>
<html>
<meta charset=utf-8>
<title>Calcul des droits de douanes</title>

<style>
  html {
    font-family: helvetica;
    font-size: 18px;
    padding: 20px;
    background: #fff;
  }
  body {
    background: #f6f6f6;
    padding: 20px;
    border: 1px solid #ccc;
  }
  button {
    font-size: .9em;
    padding: 10px 20px;
    background: #ccc;
    border: 1px solid #999;
    font-weight: bold;
    margin-right: 20px;
  }
</style>

<template id=warning>
  <h1>Bienvenue sur le prototype de « Calcul des droits de douane » pour estimer le montant des droits à payer pour l’achat en ligne d’un smartphone.</h1>

  <button data-href=amount>Commencer la simulation</button>

  <h2>Avertissement</h2>
  <p>
    La direction générale des douanes et droits indirects propose un prototype dont la finalité est d’informer l’usager de France métropolitaine des taxes qu’il pourrait avoir à acquitter en cas d’achat à distance, notamment via des sites Internet de ventes en ligne. S’appuyant sur les taux de TVA à acquitter en France ainsi que sur le tarif douanier commun des pays de l’Union Européenne (droits de douane), l’information restitue (taux, montants) n’a qu’un caractère indicatif. En particulier, le prototype ne traite pas de l’ensemble des mesures du commerce extérieur et de la totalité des taxes pouvant être appliquées. Ainsi, les montants des droits et taxes calculés peuvent être différents de ceux réellement acquittés. La consultation des textes légaux et réglementaires sont lles seuls à avoir force légale.
  </p>
</template>

<template id=amount>
  <h1>Renseignez le montant de votre achat.</h1>
  <form data-href=origin>
    <label for=price>Prix en euros :</label>
    <input type=number name=price value=100 required>
    <input type=submit value=Continuer>
  </form>

</template>

<template id=origin>
  <h1>Le vendeur expédie votre smartphone depuis un pays de l’Union européenne.</h1>
  <button data-href=duty-free>Oui</button>
  <button data-href=duty-20>Non</button>
  <button data-href=duty-unknown>Je ne sais pas</button>
</template>

<template id=duty-free data-last>
  <h1>Pas de TVA et pas de droits de douane à payer.</h1>
  <p>
    L’envoi d’un produit depuis l’Union européenne est déjà soumis à la TVA au taux en vigueur dans le pays d’expédition et n’est pas assujetti aux droits de douane.
  </p>
</template>

<template id=duty-20 data-last>
  <h1>20% de TVA, pas de droits de douane.</h1>
  <p>
    L’envoi d’un produit depuis un pays non membre de l’Union européenne est soumis à la TVA de 20 %, mais pas à des droits de douane.
  </p>
</template>

<template id=duty-unknown data-last>
  <h1>0% ou 20% de TVA, pas de droits de douane.</h1>
  <p>
    L’envoi d’un produit depuis l’Union européenne est déjà soumis à la TVA au taux en vigueur dans le pays d’expédition et n’est pas assujetti aux droits de douane. L’envoi d’un produit depuis un pays non membre de l’Union européenne est soumis à la TVA de 20 %, mais pas à des droits de douane.
  </p>
</template>

<template id=end>
  <h1>Fin de la simulation</h1>
  <p>
    Merci de votre retour.
  </p>
  <p>
    <button data-href=warning>Recommencer</button>
  </p>
</template>

<section id=container></section>

<template id=satisfaction>
  <p>J’ai la réponse à ma question</p>
  <button data-href=end>Oui</button>
  <button data-href=end>Non</button>
</template>

<script>
  var container = document.querySelector('#container')

  function showPage (page) {
    var source = document.querySelector('#' + page)
    container.innerHTML = source.innerHTML
    var withSatisfaction = source.hasAttribute('data-last')
    if (withSatisfaction) {
      container.innerHTML += document.querySelector('#satisfaction').innerHTML
    }
    initListerners(container)
  }

  function initListerners (element) {
    ;[].forEach.call(element.querySelectorAll('button[data-href]'), function (button) {
      button.addEventListener('click', function (event) {
        showPage(button.getAttribute('data-href'))
      })
    })
    ;[].forEach.call(element.querySelectorAll('form'), function (form) {
      form.addEventListener('submit', function (event) {
        showPage(form.getAttribute('data-href'))
      })
    })
  }

  showPage('warning')
</script>
</html>
